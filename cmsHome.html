<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Welcome Content</title>
  <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js"></script> 

</head>
<body>
  <div>
    <nav>
      <ul>
        <li><a href="././cmsAbout.html">About Us</a></li>
        <li><a href="././cmsDonate.html">Donation Details</a></li>
        <li><a href="././cmsJoinMin.html">About Us</a></li>

      </ul>
    </nav>
  </div>

  <h1>Edit Welcome Content</h1>

  <!-- Text Editing Section -->
  <div>
    <h2>Edit Text</h2>
    <textarea id="welcome-content" rows="6" cols="50"></textarea>
    <button id="save-welcome-text-button">Save Text</button>
  </div>

  <!-- Display Current Text -->
  <div>
    <h2>Current Text</h2>
    <p id="current-text"></p>
  </div>

  <!-- Image Upload Section -->
  <div>
    <h2>Upload Image</h2>
    <input type="file" id="image-upload" accept="image/*">
    <button id="upload-image-button">Upload Image</button>
  </div>

  <!-- Display Current Image -->
  <div>
    <h2>Welcome tab Current Image</h2>
    <img id="current-image" src="./path-to-your-current-image.jpg" alt="Current Image" style="max-width: 100%;">
  </div>

  <!-- Image Upload Section for Background Image -->
  <div>
    <h2>Change Background Image</h2>
    <input type="file" id="background-image-upload" accept="image/*">
    <button id="change-background-image-button">Change Background Image</button>
  </div>

  <!-- Display Current Background Image -->
  <div>
    <h2>Current Background Image</h2>
    <img id="current-background-image" src="./path-to-your-current-background-image.jpg" alt="Current Background Image" style="max-width: 100%; height: auto;">
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>

  <script type = "module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // THIS is the connection code. for the most part the rest of the code remains the same. this just has to be pasted on the same area on all pages to do with a connection with the databse ] 
    const firebaseConfig = {
      apiKey: "AIzaSyBW95P-YZ0GWJDdc_VYF8KC5VhDU5y9278",
      authDomain: "gracewelldatabase.firebaseapp.com",
      databaseURL: "https://gracewelldatabase-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "gracewelldatabase",
      storageBucket: "gracewelldatabase.appspot.com",
      messagingSenderId: "373455644093",
      appId: "1:373455644093:web:fdf02a68760c1d7c95ded4",
      measurementId: "G-QE913070ZV"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    function fetchCurrentContent() {
      const textRef = database.ref("welcome_text");

      textRef.on("value", (snapshot) => {
        const currentText = snapshot.val();
        document.getElementById("welcome-content").value = currentText;
        document.getElementById("current-text").textContent = currentText;
      });

      // Fetch the current background image URL from your server or database.
      // Replace the following placeholder with the actual URL.
      const currentBackgroundImageURL = "./path-to-your-current-background-image.jpg";
      document.getElementById("current-background-image").src = currentBackgroundImageURL;
    }

    function saveText() {
      const newText = document.getElementById("welcome-content").value;
      const textRef = database.ref("welcome_text");
      textRef.set(newText);
    }

    function handleImageUpload() {
      const input = document.getElementById("image-upload");
      const file = input.files[0];
      if (file) {
        // Process the uploaded image (e.g., upload to the server).
        // Replace this with actual image handling logic.
      }
    }

    function handleBackgroundImageUpload() {
      const input = document.getElementById("background-image-upload");
      const file = input.files[0];
      if (file) {
        // Process the uploaded background image (e.g., upload to the server).
        // Replace this with actual image handling logic.
      }
    }

    document.addEventListener("DOMContentLoaded", fetchCurrentContent);
    document.getElementById("save-welcome-text-button").addEventListener("click", saveText);
    document.getElementById("upload-image-button").addEventListener("click", handleImageUpload);
    document.getElementById("change-background-image-button").addEventListener("click", handleBackgroundImageUpload);
  </script>
</body>
</html>
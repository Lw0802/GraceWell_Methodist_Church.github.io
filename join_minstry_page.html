<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GraceWell Methodist Church</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="././css_files/join_minstry_page.css">
  <link rel="stylesheet" href="././css_files/global.css">
</head>

<body>
  <div id="app">
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <a class="navbar-brand" href="././index.html" target="_self"></a>
  </div>
  </nav>

  <!-- Header Image with Welcome Message -->
  <div class="header-image">
    <a class="back_btn" href="././get_involved_page.html">Back</a>
    <div class="center-panel">
      <h1>1 Peter 4 : 10</h1>
      <p>Each of you should use whatever gift you have received to serve others, as faithful stewards of God’s grace in
        its various forms .</p>
    </div>
  </div>

  <!-- Page content -->
  <section class="content-section">
    <h1 style="font-weight: 650">Join One of Our Ministries</h1>
    <br>
    <div class="row">
      <!-- Left side content -->
      <div class="col-md-6">
        <h2 class="content-header">Ushers</h2>
        <p class="content-paragraph">Join our Ushers Team and be a welcoming presence in our church. As an usher,
          you'll play a vital role in creating a warm and inclusive environment for our congregation. Your friendly
          smile and helpful assistance make a difference in every worship service. Join us today and help us make
          everyone feel at home.</p>
      </div>
      <!-- Right side image -->
      <div class="col-md-6 d-flex justify-content-end">
        <img src="././website_images/Ushers(edited).jpg" alt="Grace Well Church" />
      </div>
    </div>
    <hr>
    <div class="row">
      <!-- Right side image -->
      <div class="col-md-6">
        <img src="././website_images/pexels-abel-tan-jun-yang-volunteer-2 (edited).jpg" alt="Grace Well Church" />
      </div>
      <!-- Left side content -->
      <div class="col-md-6 justify-content-end">
        <h2 class="content-header">Church Band</h2>
        <p class="content-paragraph">Joining the Church Band or Choir, where you can share your talents, uplift
          spirits, and be a vital part of our worship experience. Whether you play an instrument or have a beautiful
          voice, we welcome musicians and singers of any skill levels. Together, we create soul-stirring melodies that
          inspire, heal, and connect our congregation.</p>
      </div>
    </div>
    <hr>
    <div class="row">
      <!-- Left side content -->
      <div class="col-md-6">
        <h2 class="content-header">Media Team</h2>
        <p class="content-paragraph">Join our Media Team and be an integral part of how we share our message with the
          world. From capturing the essence of our services on camera to managing our online presence and live
          streams, your skills can help us reach and connect with a broader audience. Whether you're an experienced
          professional or just getting started, your contribution matters.</p>
      </div>
      <!-- Right side image -->
      <div class="col-md-6 d-flex justify-content-end">
        <img src="././website_images/pexels-caleb-oquendo-volunteer-3(edited).jpg" alt="Grace Well Church" />
      </div>
    </div>
    <br>
    <hr>
    <div class="row">
      <!-- Left side content -->
      <div class="col-md-6">
        <h3 class="content-header">Instructions</h3>
        <p><strong>1. Personal Information:</strong> Begin by filling out your <strong>First Name</strong> and
          <strong>Last Name</strong> in the respective fields. Provide your <strong>Cellphone</strong> number (required
          for contact), and if applicable, include your <strong>Telephone</strong> number. Share your valid
          <strong>Email Address</strong>, ensuring it's accurate as it will be our primary means of contacting you
          regarding your membership. Enter your <strong>Date of Birth</strong> to help us better understand your
          eligibility and interests.
        </p>

        <p><strong>2. Ministry Selection:</strong> Select your preferred ministry by choosing from the available options
          in the "Pick a Ministry" section. You can choose from options such as Ushers, Church Band, or Media Team.</p>

        <p><strong>3. Confirmation Email:</strong> Following submission, you will receive an automated confirmation
          email acknowledging your successful membership registration. Our church ministry team will review your
          registration and reach out to you via the provided email address. We will discuss further details, next steps,
          and how you can actively participate in your chosen ministry.</p>
      </div>
      <!-- Right side content -->
      <div class="col-md-6">
        <h3 class="content-header">Become a Member</h3>
        <!-- Join Ministry Form -->
        <form id="joinMinistryForm">
          <!-- Radio Checkboxes for Ministry Type-->
          <label>Pick a Minstry</label>
          <div class="form-group">
            <div class="radio-buttons">
              <label><input type="radio" name="ministry" value="Ushers"> Ushers </label>
              <label><input type="radio" name="ministry" value="Church Band"> Church Band </label>
              <label><input type="radio" name="ministry" value="Media Team"> Media Team </label>
            </div>
          </div>
          <!-- Name and Surname -->
          <div class="form-group">
            <input type="text" class="form-control" id="firstName" placeholder="First Name" required>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
          </div>
          <!-- Cellphone and Telephone -->
          <div class="form-row">
            <div class="form-group col-md-6">
              <input type="tel" class="form-control" id="cellphone" placeholder="Cellphone" required>
            </div>
            <div class="form-group col-md-6">
              <input type="tel" class="form-control" id="telephone" placeholder="Telephone">
            </div>
          </div>
          <!-- Email Address -->
          <div class="form-group">
            <input type="email" class="form-control" id="email" placeholder="Email Address" required>
          </div>
          <!-- Email Address and Date Picker-->
          <div class="form-group">
            <label for="dateOfBirth">Date of Birth</label>
            <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth" required>
          </div>
        </form>
        <!-- Submit Button -->
        <button id="signUpButton" name="signUpButton" type="submit" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p class="footer-label">© GraceWell Methodist Church. All rights reserved.</p>
      <div class="footer-links">
        <p class="footer-label">Follow Us:</p>
        <!-- Facebook icon: https://www.flaticon.com/free-icons/facebook -->
        <a href="https://www.facebook.com/GraceWellMC/"><img src="././website_images/facebook-logo(edited).png"
            alt="facebook" class="footer-image"></a>
        <!-- Instagram icon: https://www.flaticon.com/free-icons/instagram-sketched -->
        <a href="https://www.instagram.com/gracewellmc/"><img src="././website_images/instagram-logo(edited).png"
            alt="instagram" class="footer-image"></a>
        <!-- LinkedIn icon: https://www.flaticon.com/free-icons/linkedin -->
        <a href="https://za.linkedin.com/in/gracewell-methodist-church-807389219"><img
            src="././website_images/linkedin-square-logo(edited).png" alt="linkedin" class="footer-image"></a>
        <p class="footer-label" style="margin-left: 30px;">Download Our App:</p>
        <!--App Store Icon: https://www.flaticon.com/free-icons/app-->
        <a href="#"><img src="././website_images/app-store-logo(edited).png" alt="appstore" class="footer-image"></a>
        <!--Play Store: https://www.flaticon.com/free-icons/playstore-->
        <a href="#"><img src="././website_images/google-playstore-logo(edited).png" alt="playstore"
            class="footer-image"></a>
      </div>
    </div>
  </footer>
  </div>
  <!-- Bootstrap JS (Popper.js and jQuery are required for Bootstrap) -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Vue.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <!-- Custom JavaScript code -->
  <script src="././js_files/global.js"></script>
</body>

<script>
  // Check if the authentication token exists in local storage
  const authTokenData = localStorage.getItem('authToken');

  if (authTokenData) {
    const authToken = JSON.parse(authTokenData);
    const currentTime = new Date().getTime();

    if (authToken.expirationTime > currentTime) {
      // Token is not expired, and you can proceed
      const auth = getAuth();
      signInWithCustomToken(auth, authToken.token)
        .then((userCredential) => {
          // Token is valid
          // You can use `userCredential.user` to get user information
        })
        .catch((error) => {
          // Token is expired or invalid
          // Handle the authentication failure, or redirect to the login page
        });
    } else {
      // Token is expired, redirect to the login page
      window.location.href = 'login_page.html';
    }
  } else {
    // No token, user is not authenticated
    // Redirect to the login page
    window.location.href = 'login_page.html';
  }
</script>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
  import { getDatabase, ref, set, push } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-database.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBW95P-YZ0GWJDdc_VYF8KC5VhDU5y9278",
    authDomain: "gracewelldatabase.firebaseapp.com",
    databaseURL: "https://gracewelldatabase-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "gracewelldatabase",
    storageBucket: "gracewelldatabase.appspot.com",
    messagingSenderId: "373455644093",
    appId: "1:373455644093:web:fdf02a68760c1d7c95ded4",
    measurementId: "G-QE913070ZV"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const auth = getAuth();


  signUpButton.addEventListener('click', (e) => {

    var ministry = document.querySelector('input[name="ministry"]:checked').value;
    var firstName = document.getElementById('firstName').value;
    var lastName = document.getElementById('lastName').value;
    var cellphone = document.getElementById('cellphone').value;
    var telephone = document.getElementById('telephone').value;
    var email = document.getElementById('email').value;
    var dateOfBirth = document.getElementById('dateOfBirth').value;

    alert("Form submitted!!");

    const joinMinstryRef = ref(database, 'minstryJoin');
    const newjoinMinstryRef = push(joinMinstryRef); // Generate a unique key for the appointment

    // set(ref(database, 'Appointments/') previous
    set(joinMinstryRef, {
      ministry: ministry,
      firstName: firstName,
      lastName: lastName,
      cellphone: cellphone,
      telephone: telephone,
      email: email,
      dateOfBirth: dateOfBirth,
    })
      // ...
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;

        alert(errorMessage);
        // ..
      });
  });
</script>

</html>